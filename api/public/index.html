<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Sidia Challenge</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" type="text/css" href="assets/bootstrap-3.3.7-dist/css/bootstrap.min.css">
	<!-- Font Awesome CSS -->
	<link rel="stylesheet" type="text/css" href="assets/font-awesome-4.6.3/css/font-awesome.min.css">
	<!-- DataTable CSS -->
	<link rel="stylesheet" type="text/css" href="assets/datatable/DataTables-1.10.12/css/dataTables.bootstrap.min.css">
	<!-- DataTable extension css -->
	<link rel="stylesheet" type="text/css" href="assets/datatable_extension/buttons.dataTables.min.css">
    <!-- Custom css: SB Admin 2 -->
    <link href="assets/css/sb-admin-2.css" rel="stylesheet">
</head>

<body>   
	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
		<div class="navbar-header">
			<a class="navbar-brand">Wagner Queiroz - Sidia Challenger</a>
		</div>
	</nav> 
	<!-- End Navigation -->

	<div id="page-wrapper">
	
		<div class="row"> 

			<div class="col-lg-12" style = 'margin-top:20px;'>
				
			</div>
		</div>

		<div class="row" id="tableData">
			<div class="col-lg-12"  style="margin-top: 40px">
				<div class="panel panel-default">
					<div class="panel-heading">
						Titles
					</div>
					<div class="panel-body">
						<div class="table-responsive">
							<table id="sort" class="table table-striped table-bordered display responsive nowrap" cellspacing="0" width="100%">
								<thead>
									<tr>
										<th>#</th>
										<th>Original Title</th>
										<th>Primary Title</th>
										<th>Category Name</th>
										<th>Adult Title</th>
										<th>Start Year</th>
										<th>End Year</th>
										<th>Runtime Minutes</th>
										<th>Average Rating</th>
										<th>Number of Votes</th>
									</tr>
								</thead>

								<!-- DATATABLE ROW -->
								<tbody>
										
								</tbody>

							</table>
						</div>
					</div>
				</div>
			</div>
		</div> 
	</div>
	<!-- /#page-wrapper -->

    <!-- Jquery &amp; Bootstrap Javascript -->
	<script type="text/javascript" src="assets/jquery/jquery-3.1.0.min.js"></script>
	<script type="text/javascript" src="assets/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

	<!-- DataTable Javascript -->
	<script type="text/javascript" src="assets/datatable/DataTables-1.10.12/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="assets/datatable/DataTables-1.10.12/js/dataTables.bootstrap.min.js"></script>
	<script type="text/javascript" src="assets/datatable/datatables.min.js"></script>
    <script src="assets/datatable_extension/vfs_fonts.js"></script>
	

	<script type="text/javascript">

		$(document).ready(function() {
			$.ajax({
				type: 'GET',
				url: 'http://127.0.0.1:4000/categories',
				dataType: 'json',
				success: function (data) {
					console.log(data);
					data.forEach( item => {
						$("#categories-drop").append('<option value="' + item.id + '">' + item.category_name + '</option>');
					})
				}
			});

			table = $('#sort').DataTable({
                ajax:{
                    "url": 'http://127.0.0.1:4000/titles',
                    "type": "POST",
                    "data": {
                        year: 2000,
                        category_id: 1,
                        limit: 100,
                        offset: 0
                    }
                } ,
                responsive: true,
                columns: [
                    {"data": "id"},
                    {"data": "original_title"},
                    {"data": "primary_title"},
                    {"data": "categories.category_name"},
                    {"data": "adult_title"},
                    {"data": "start_year_title"},
                    {"data": "end_year_title"},
                    {"data": "runtime_minutes_title"},
                    {"data": "average_rating_title"},
                    {"data": "num_votes_title"}
                ],
                'order': [[1, 'asc']]
            });

        }); // End Document Ready

	</script>
</body>
</html>